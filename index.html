<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday for Vaani</title>
    <style>
        :root {
            --cherry-bg: #fff0f3;
            --deep-pink: #ff4d6d;
            --soft-pink: #ff85a1;
            --flower-yellow: #ffe162;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: var(--cherry-bg);
            font-family: 'Comic Sans MS', cursive, sans-serif;
        }

        /* Background Animations */
        .falling-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .page {
            display: none;
            width: 100vw;
            height: 100vh;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 1;
        }

        .active { display: flex; }

        /* Page 1: Tree Navigation */
        #page1 { cursor: pointer; }
        .tree-container {
            text-align: center;
            animation: float 3s infinite ease-in-out;
        }
        .tree-svg { width: 280px; height: auto; transition: transform 0.3s; }
        .tree-svg:active { transform: scale(0.9); }
        .instruction { color: var(--deep-pink); font-weight: bold; margin-top: 10px; }

        /* Page 2: Fireworks */
        #page2.active { background-color: #000 !important; } /* Lights out for fireworks! */
        .wish-text {
            font-size: 2rem;
            text-align: center;
            opacity: 0;
            background: linear-gradient(to right, #ff85a1, #ffe162);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            z-index: 10;
        }

        .rocket-btn { font-size: 60px; background: none; border: none; cursor: pointer; z-index: 10; }
        
        /* Annoying Flower Button */
        .flower-btn {
            display: none;
            position: absolute;
            width: 120px;
            height: 120px;
            background: var(--deep-pink);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 0 15px rgba(255, 77, 109, 0.5);
            z-index: 20;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px;
            text-align: center;
        }
        .flower-btn::after { /* Petals */
            content: "‚úø";
            position: absolute;
            font-size: 160px;
            color: var(--soft-pink);
            z-index: -1;
            opacity: 0.6;
        }

        /* Page 3: Video & Poem */
        #bdayVideo {
            width: 80%; /* Smaller size as requested */
            max-width: 400px;
            border-radius: 15px;
            border: 4px solid var(--deep-pink);
        }
        .poem-area {
            display: none;
            padding: 20px;
            color: var(--deep-pink);
            line-height: 1.5;
            font-size: 1.1rem;
            text-align: center;
            animation: fadeIn 2s forwards;
        }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
        
        canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
    </style>
</head>
<body>

    <div class="falling-container" id="fallZone"></div>

    <div id="page1" class="page active" onclick="goToPage(2)">
        <div class="tree-container">
            <svg class="tree-svg" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                <path d="M100 180 Q100 100 130 50 M100 160 Q70 110 50 80 M100 140 Q120 120 150 110" stroke="#4b2c20" stroke-width="8" fill="none" stroke-linecap="round"/>
                <circle cx="130" cy="50" r="25" fill="#ffb7c5" opacity="0.8"/>
                <circle cx="50" cy="80" r="20" fill="#ffb7c5" opacity="0.8"/>
                <circle cx="150" cy="110" r="15" fill="#ff85a1" opacity="0.8"/>
                <circle cx="100" cy="70" r="30" fill="#ffc0cb" opacity="0.8"/>
                <text x="75" y="195" fill="#ff4d6d" font-size="10">Tap the tree üå∏</text>
            </svg>
        </div>
    </div>

    <div id="page2" class="page">
        <canvas id="fwCanvas"></canvas>
        <button class="rocket-btn" id="rocket" onclick="startFireShow()">üöÄ</button>
        <h1 id="wishTxt" class="wish-text">Wish you a happy birthday Vaani üå∏</h1>
        <button id="giftBtn" class="flower-btn" onclick="goToPage(3)">A small gift for my bestie üéÅ</button>
    </div>

    <div id="page3" class="page">
        <video id="bdayVideo" controls>
            <source src="birthday-video.mp4.mp4" type="video/mp4">
        </video>
        <div id="poemArea" class="poem-area">
            "A hand to hold, a heart to share,<br>
            A constant love that‚Äôs always there.<br>
            Through every laugh and every tear,<br>
            I‚Äôm glad to have a sister near."<br><br>
            <strong>Wish you a happy birthday bestie! üíñ</strong>
        </div>
    </div>

    <script>
        // --- Navigation ---
        function goToPage(num) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById('page' + num).classList.add('active');
            if(num === 2) stopFalling(); // Stop blossoms for fireworks scene
            if(num === 3) {
                startFalling(); // Resume blossoms
                const video = document.getElementById('bdayVideo');
                video.onended = () => {
                    document.getElementById('poemArea').style.display = 'block';
                    video.style.marginBottom = "20px";
                };
            }
        }

        // --- Falling Hearts & Flowers ---
        const fallZone = document.getElementById('fallZone');
        let fallInterval;
        function startFalling() {
            fallInterval = setInterval(() => {
                const item = document.createElement('div');
                item.innerHTML = Math.random() > 0.5 ? 'üå∏' : 'üíó';
                item.style.cssText = `
                    position: absolute; left: ${Math.random() * 100}%; top: -50px;
                    font-size: ${Math.random() * 20 + 10}px;
                    transition: transform 4s linear, opacity 4s;
                    z-index: 0; user-select: none;
                `;
                fallZone.appendChild(item);
                setTimeout(() => {
                    item.style.transform = `translateY(110vh) rotate(${Math.random() * 360}deg)`;
                    item.style.opacity = '0';
                }, 100);
                setTimeout(() => item.remove(), 4500);
            }, 300);
        }
        function stopFalling() { clearInterval(fallInterval); fallZone.innerHTML = ''; }
        startFalling();

        // --- Fireworks Logic ---
        function startFireShow() {
            document.getElementById('rocket').style.display = 'none';
            document.getElementById('wishTxt').style.opacity = '1';
            initFireworks(); // Triggers canvas animation
            
            const giftBtn = document.getElementById('giftBtn');
            giftBtn.style.display = 'flex';
            giftBtn.style.top = "80%";
            
            // Annoying movement
            giftBtn.onmouseover = () => {
                giftBtn.style.left = Math.random() * 60 + 10 + "%";
                giftBtn.style.top = Math.random() * 70 + 10 + "%";
            };
        }

        function initFireworks() {
            const canvas = document.getElementById('fwCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            let particles = [];

            function createParticle(x, y) {
                for (let i = 0; i < 30; i++) {
                    particles.push({
                        x, y,
                        dx: (Math.random() - 0.5) * 8,
                        dy: (Math.random() - 0.5) * 8,
                        color: `hsl(${Math.random() * 360}, 100%, 70%)`,
                        life: 100
                    });
                }
            }

            function animate() {
                ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                particles.forEach((p, i) => {
                    p.x += p.dx; p.y += p.dy; p.life--;
                    ctx.fillStyle = p.color;
                    ctx.fillRect(p.x, p.y, 3, 3);
                    if (p.life <= 0) particles.splice(i, 1);
                });
                if (Math.random() < 0.05) createParticle(Math.random() * canvas.width, Math.random() * canvas.height);
                requestAnimationFrame(animate);
            }
            animate();
        }
    </script>
</body>
</html>
